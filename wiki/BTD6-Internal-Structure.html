<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>BTD6 Internal Structure</title><meta property="description" content="Wiki for the modding api for BloonsTD6. Learn how to download, install and make BTD6 mods."/><meta property="apple-mobile-web-app-capable" content="yes"/><meta property="apple-mobile-web-app-status-bar-style" content="black-translucent"/><link rel="icon" href="/BTD-Mod-Helper/images/ModHelper.ico"/><meta property="og:title" content="BTD6 Internal Structure"/><meta property="og:description" content="Wiki for the modding api for BloonsTD6. Learn how to download, install and make BTD6 mods."/><meta property="og:image" content="https://gurrenm3.github.io/BTD-Mod-Helper/images/ModHelper.png"/><meta property="og:site_name" content="BTD Mod Helper"/><meta property="og:type" content="website"/><meta name="next-head-count" content="12"/><link rel="preload" href="/BTD-Mod-Helper/_next/static/css/709d3ffde9abc1ef.css" as="style" crossorigin=""/><link rel="stylesheet" href="/BTD-Mod-Helper/_next/static/css/709d3ffde9abc1ef.css" crossorigin="" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="/BTD-Mod-Helper/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/BTD-Mod-Helper/_next/static/chunks/webpack-fdc70a0dddb50aeb.js" defer="" crossorigin=""></script><script src="/BTD-Mod-Helper/_next/static/chunks/framework-8577918a174de4bc.js" defer="" crossorigin=""></script><script src="/BTD-Mod-Helper/_next/static/chunks/main-13822e75580b3d10.js" defer="" crossorigin=""></script><script src="/BTD-Mod-Helper/_next/static/chunks/pages/_app-4ca433b85517a7c4.js" defer="" crossorigin=""></script><script src="/BTD-Mod-Helper/_next/static/chunks/251-ddc1856b9a7818ba.js" defer="" crossorigin=""></script><script src="/BTD-Mod-Helper/_next/static/chunks/pages/wiki/%5B...mdPath%5D-5148358cb0c87eec.js" defer="" crossorigin=""></script><script src="/BTD-Mod-Helper/_next/static/ukqKSHooCdO3xcE7m-DiA/_buildManifest.js" defer="" crossorigin=""></script><script src="/BTD-Mod-Helper/_next/static/ukqKSHooCdO3xcE7m-DiA/_ssgManifest.js" defer="" crossorigin=""></script><style id="__jsx-2283511297">[data-theme="light"] .btd6-panel.blue{border-image-source:url(/BTD-Mod-Helper/images/BTD6/MainBGPanelBlue.png)}.btd6panel.brown{border-image-source:url(/BTD-Mod-Helper/images/BTD6/MainBgPanel.png)}.btd6-panel.yellow{border-image-source:url(/BTD-Mod-Helper/images/BTD6/MainBGPanelYellow.png)}.btd6-panel.grey{border-image-source:url(/BTD-Mod-Helper/images/BTD6/MainBgPanelGrey.png)}.btd6-panel.dark{border-image-source:url(/BTD-Mod-Helper/images/BTD6/MainBgPanelJukebox.png)}[data-theme="light"] .btd6-panel.blue-insert{border-image-source:url(/BTD-Mod-Helper/images/BTD6/BlueInsertPanel.png)}.btd6-panel.grey-insert{border-image-source:url(/BTD-Mod-Helper/images/BTD6/GreyInsertPanel.png)}.btd6-panel.brown-insert{border-image-source:url(/BTD-Mod-Helper/images/BTD6/BrownInsertPanel.png)}.btd6-panel.white-insert{border-image-source:url(/BTD-Mod-Helper/images/BTD6/InsertPanelWhite.png)}.btd6-panel.white-insert-round{border-image-source:url(/BTD-Mod-Helper/images/BTD6/InsertPanelWhiteRound.png);color:black}[data-theme="light"] .btd6-panel.blue-insert-round{border-image-source:url(/BTD-Mod-Helper/images/BTD6/BlueInsertPanelRound.png)}[data-theme="light"] .btd6-button.blue{background-image:url(/BTD-Mod-Helper/images/BTD6/BlueBtn.png)}[data-theme="light"] .btd6-button.blue.long{background-image:url(/BTD-Mod-Helper/images/BTD6/BlueBtnLong.png)}[data-theme="light"].btd6-button.green{background-image:url(/BTD-Mod-Helper/images/BTD6/GreenBtn.png)}[data-theme="light"] .btd6-button.green.long{background-image:url(/BTD-Mod-Helper/images/BTD6/GreenBtnLong.png)}[data-theme="light"] .btd6-button.red{background-image:url(/BTD-Mod-Helper/images/BTD6/RedBtn.png)}[data-theme="light"] .btd6-button.red.long{background-image:url(/BTD-Mod-Helper/images/BTD6/RedBtnLong.png)}[data-theme="light"] .btd6-button.yellow{background-image:url(/BTD-Mod-Helper/images/BTD6/YellowBtn.png)}[data-theme="light"] .btd6-button.yellow.long{background-image:url(/BTD-Mod-Helper/images/BTD6/YellowBtnLong.png)}</style></head><body><div id="__next"><div style="position:relative;overflow:hidden;width:100%;height:auto;min-height:0;max-height:1000px"><div style="position:relative;overflow:hidden;-webkit-overflow-scrolling:touch;margin-right:0;margin-bottom:0;min-height:0;max-height:1000px"><div class="dynamic-background" style="position:fixed;left:0;right:0;z-index:-100;background-image:url(/BTD-Mod-Helper/images/BTD6/Maps/Workshop.png);background-repeat:no-repeat;filter:blur(7px);transform:scale(1.1);height:100%;width:100%"></div><div class="d-flex flex-column" style="min-height:1000px"><a class="position-absolute visually-hidden-focusable" href="/BTD-Mod-Helper/wiki/BTD6-Internal-Structure#main-content">Skip to Main Content</a><div class="p-0 my-lg-4 container-lg"><nav class="luckiest-guy d-flex main-panel btd6-panel blue navbar navbar-expand-md navbar-dark"><a href="/BTD-Mod-Helper/" class="py-0 navbar-brand"><img alt="Mod Helper logo" loading="eager" width="50" height="50" decoding="async" data-nimg="1" style="color:transparent" src="/BTD-Mod-Helper//_next/static/media/ModsBtn.b2997d2b.png"/></a><a href="/BTD-Mod-Helper/" class="text-outline-black text-white fs-3 py-0 me-auto navbar-brand">BTD Mod Helper</a><div class="ms-auto me-4"><svg xmlns="http://www.w3.org/2000/svg" width="2rem" height="2rem" viewBox="0 0 24 24" color="rgba(255,255,255,.75)" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" style="cursor:pointer;transform:rotate(90deg)" class="dark-mode-switch"><mask id="circle-mask-0"><rect x="0" y="0" width="100%" height="100%" fill="white"></rect><circle style="cx:100%;cy:0%" r="9" fill="black"></circle></mask><circle cx="12" cy="12" fill="rgba(255,255,255,.75)" style="r:5px" mask="url(#circle-mask-0)"></circle><g stroke="currentColor" style="opacity:1"><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></g></svg></div><button type="button" aria-label="toggle" class="btd6-button blue p-2 navbar-toggler collapsed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="2rem" height="2rem" fill="currentColor" class="bi bi-list text-white"><path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5"></path></svg></button><div class="flex-grow-0 navbar-collapse collapse"><div class="navbar-nav ms-auto text-center"><div class="nav-item" data-toggle="tooltip"><a class="text-outline-black fs-3 py-0 nav-link" href="/BTD-Mod-Helper">Home</a></div><div class="nav-item" data-toggle="tooltip"><a class="text-outline-black fs-3 py-0 nav-link active" href="/BTD-Mod-Helper/wiki/Home">Wiki</a></div><div class="nav-item" data-toggle="tooltip"><a class="text-outline-black fs-3 py-0 nav-link" href="/BTD-Mod-Helper/docs/README">Docs</a></div><div class="nav-item" data-toggle="tooltip"><a class="text-outline-black fs-3 py-0 nav-link" href="/BTD-Mod-Helper/mod-browser">Mod Browser</a></div></div></div></nav></div><div class="d-flex flex-grow-1"><div class="d-flex flex-1 justify-content-end align-items-start pe-lg-4 ps-lg-4"><div class="main-panel w-auto btd6-panel blue offcanvas-lg offcanvas-start"><div class="pt-2 pb-0 px-3 offcanvas-header"><div class="offcanvas-title h5">Table of Contents</div><button type="button" class="btn-close btn-close-white" aria-label="Close"></button></div><div class="py-2 px-3 d-block btd6-panel blue-insert-round offcanvas-body"><nav class="toc"><ol class="toc-level toc-level-1"><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2 next-link" href="/BTD-Mod-Helper/wiki/BTD6-Internal-Structure#gameinstance">Game.instance</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2 next-link" href="/BTD-Mod-Helper/wiki/BTD6-Internal-Structure#the-gamemodel">The GameModel</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2 next-link" href="/BTD-Mod-Helper/wiki/BTD6-Internal-Structure#ingameinstance">InGame.instance</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2 next-link" href="/BTD-Mod-Helper/wiki/BTD6-Internal-Structure#unitytosimulation-aka-the-bridge">UnityToSimulation (aka the &quot;bridge&quot;)</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2 next-link" href="/BTD-Mod-Helper/wiki/BTD6-Internal-Structure#cloned-gamemodels">Cloned GameModels</a></li></ol></nav></div></div></div><div class="d-flex flex-1 justify-content-start align-items-start ps-lg-4 pe-lg-4 order-1"><div class="main-panel w-auto btd6-panel blue offcanvas-lg offcanvas-end"><div class="pt-2 pb-0 px-3 offcanvas-header"><div class="offcanvas-title h5">Wiki</div><button type="button" class="btn-close btn-close-white" aria-label="Close"></button></div><div class="py-2 px-3 d-block btd6-panel blue-insert-round offcanvas-body"><h5 id="home"><a class="next-link" aria-hidden="true" tabindex="-1" href="/BTD-Mod-Helper/wiki/BTD6-Internal-Structure#home"><span class="icon icon-link"></span></a><a class="next-link" href="/BTD-Mod-Helper/wiki/Home">Home</a></h5>
<h5 id="install-guide"><a class="next-link" aria-hidden="true" tabindex="-1" href="/BTD-Mod-Helper/wiki/BTD6-Internal-Structure#install-guide"><span class="icon icon-link"></span></a><a class="next-link" href="/BTD-Mod-Helper/wiki/Install-Guide">Install Guide</a></h5>
<h6 id="starting-btd-modding"><a class="next-link" aria-hidden="true" tabindex="-1" href="/BTD-Mod-Helper/wiki/BTD6-Internal-Structure#starting-btd-modding"><span class="icon icon-link"></span></a>Starting BTD Modding</h6>
<p><a class="next-link" href="/BTD-Mod-Helper/wiki/Prerequisites">Prerequisites</a></p>
<p><a class="next-link" href="/BTD-Mod-Helper/wiki/Getting-Started">Getting Started</a></p>
<h6 id="mod-helper-features"><a class="next-link" aria-hidden="true" tabindex="-1" href="/BTD-Mod-Helper/wiki/BTD6-Internal-Structure#mod-helper-features"><span class="icon icon-link"></span></a>Mod Helper Features</h6>
<p><a class="next-link" href="/BTD-Mod-Helper/wiki/Making-a-Custom-Tower"><strong>Making a Custom Tower</strong></a></p>
<p><a class="next-link" href="/BTD-Mod-Helper/wiki/Making-a-Custom-Paragon"><strong>Making a Custom Paragon</strong></a></p>
<p><a class="next-link" href="/BTD-Mod-Helper/wiki/Making-a-Custom-Hero"><strong>Making a Custom Hero</strong></a></p>
<p><a class="next-link" href="/BTD-Mod-Helper/wiki/Appearing-in-the-Mod-Browser"><strong>Appearing in the Mod Browser</strong></a></p>
<p><a class="next-link" href="/BTD-Mod-Helper/wiki/Localization">Localization</a></p>
<p><a class="next-link" href="/BTD-Mod-Helper/wiki/Making-a-Custom-Bloon">Making a Custom Bloon</a></p>
<p><a class="next-link" href="/BTD-Mod-Helper/wiki/Making-a-Custom-Game-Mode">Making a Custom Game Mode</a></p>
<p><a class="next-link" href="/BTD-Mod-Helper/wiki/Making-a-Custom-Round-Set">Making a Custom Round Set</a></p>
<p><a class="next-link" href="/BTD-Mod-Helper/wiki/Custom-UI">Custom UI (ModHelperComponents)</a></p>
<p><a class="next-link" href="/BTD-Mod-Helper/wiki/Custom-Menu-Screens">Custom Menu Screens</a></p>
<p><a class="next-link" href="/BTD-Mod-Helper/wiki/Custom-Byte-Loaders">Custom Byte Loaders</a></p>
<h6 id="btd-modding-info"><a class="next-link" aria-hidden="true" tabindex="-1" href="/BTD-Mod-Helper/wiki/BTD6-Internal-Structure#btd-modding-info"><span class="icon icon-link"></span></a>BTD Modding Info</h6>
<p><a class="next-link" href="/BTD-Mod-Helper/wiki/BTD6-Internal-Structure">BTD6 Internal Structure</a></p>
<p><a class="next-link" href="/BTD-Mod-Helper/wiki/Looking-at-BTD6-Code-(Sorta)">Looking at BTD6 Code (Sorta)</a></p>
<p><a class="next-link" href="/BTD-Mod-Helper/wiki/IL2CPP-Is-Weird">IL2CPP Is Weird</a></p>
<p><a class="next-link" href="/BTD-Mod-Helper/wiki/Useful-Resources">Useful Resources</a></p>
<h6 id="mod-helper-utilities"><a class="next-link" aria-hidden="true" tabindex="-1" href="/BTD-Mod-Helper/wiki/BTD6-Internal-Structure#mod-helper-utilities"><span class="icon icon-link"></span></a>Mod Helper Utilities</h6>
<p><a class="next-link" href="/BTD-Mod-Helper/wiki/Using-Mod-Helper-Hooks">Using Mod Helper Hooks</a></p>
<p><a class="next-link" href="/BTD-Mod-Helper/wiki/ModContent">ModContent</a></p>
<p><a class="next-link" href="/BTD-Mod-Helper/wiki/Custom-Textures-and-Displays">Custom Textures and Displays</a></p>
<p><a class="next-link" href="/BTD-Mod-Helper/wiki/Mod-Settings">In Game Mod Settings</a></p>
<h6 id="extension-methods"><a class="next-link" aria-hidden="true" tabindex="-1" href="/BTD-Mod-Helper/wiki/BTD6-Internal-Structure#extension-methods"><span class="icon icon-link"></span></a>Extension Methods</h6>
<p><a class="next-link" href="/BTD-Mod-Helper/wiki/Common-Extension-Methods">Common Extension Methods</a></p>
<p><a class="next-link" href="/BTD-Mod-Helper/wiki/Array-extension-methods">Array Extension Methods</a></p></div></div></div><a id="main-content" tabindex="-1"></a><div class="main-panel py-2 px-3 d-flex flex-column btd6-panel blue container-lg"><div class="my-1 btd6-panel blue-insert-round"><h1 class="d-flex"><div class="flex-1 d-lg-none text-start"><button type="button" class="d-lg-none me-2 btd6-button blue p-2 btn btn-outline-light"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="2rem" height="2rem" fill="currentColor" class="bi bi-list-ul"><path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2m0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2m0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2"></path></svg></button></div><div class="text-center text-lg-start mt-1 mt-lg-start">BTD6 Internal Structure</div><div class="flex-1 d-lg-none text-end"><button type="button" class="d-lg-none ms-auto btd6-button blue p-2 btn btn-outline-light"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="2rem" height="2rem" fill="currentColor" class="bi bi-list"><path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5"></path></svg></button></div></h1></div><hr/><div class="d-block btd6-panel blue-insert-round"><p>Some useful information about the internal structure of BTD6 so that you don&#x27;t have to find it out yourself.</p>
<h2 id="gameinstance"><a class="next-link" aria-hidden="true" tabindex="-1" href="/BTD-Mod-Helper/wiki/BTD6-Internal-Structure#gameinstance"><span class="icon icon-link"></span></a>Game.instance</h2>
<p>From any of your .cs files, you can use <code class="hljs">Game.instance</code> to access the BloonTD6 <code class="hljs">Game</code>. This class contains many important references to the data structures that power the overall running of the game.</p>
<h2 id="the-gamemodel"><a class="next-link" aria-hidden="true" tabindex="-1" href="/BTD-Mod-Helper/wiki/BTD6-Internal-Structure#the-gamemodel"><span class="icon icon-link"></span></a>The GameModel</h2>
<p>Arguably the most important thing you&#x27;ll find in <code class="hljs">Game.instance</code> is <code class="hljs">Game.instance.model</code> which is the main instance of the BloonsTD6 <code class="hljs">GameModel</code> (but importantly not the only one). The <code class="hljs">GameModel</code> isn&#x27;t a model like a 3D display model, but rather a blueprint / collection of blueprints for playing a match of BloonsTD6.</p>
<p>For instance, for all the information about Towers, such as their behavior, cost, damage, etc are all held in <code class="hljs">TowerModels</code> that you can find in <code class="hljs">Game.instance.model.towers</code>. The <code class="hljs">GameModel</code> contains various methods for finding <code class="hljs">TowerModels</code> such as <code class="hljs">GetTower()</code> and <code class="hljs">GetTowerFromId()</code>.</p>
<p>Similarly all the information about upgrades are stored in the <code class="hljs">UpgradeModel</code>s of <code class="hljs">Game.instance.model.upgrades</code>, all the Bloons in <code class="hljs">BloonModel</code>s of <code class="hljs">Game.instance.model.bloons</code> and etc.</p>
<h2 id="ingameinstance"><a class="next-link" aria-hidden="true" tabindex="-1" href="/BTD-Mod-Helper/wiki/BTD6-Internal-Structure#ingameinstance"><span class="icon icon-link"></span></a>InGame.instance</h2>
<p>Similarly to <code class="hljs">Game.instance</code>, you can use <code class="hljs">InGame.instance</code> in any of your .cs files to access the <code class="hljs">InGame</code> class which has a lot of important information and functions relating to running the current match of BTD6.</p>
<h2 id="unitytosimulation-aka-the-bridge"><a class="next-link" aria-hidden="true" tabindex="-1" href="/BTD-Mod-Helper/wiki/BTD6-Internal-Structure#unitytosimulation-aka-the-bridge"><span class="icon icon-link"></span></a>UnityToSimulation (aka the &quot;bridge&quot;)</h2>
<p>The <code class="hljs">UnityToSimulation</code> class found at <code class="hljs">InGame.instance.bridge</code> controls the interaction between the simulation (all of the information about the current state) and Unity (the engine powering the visualization of the game. This has more methods for handling / manipulating current match information, so if you didn&#x27;t find what you were looking for in <code class="hljs">InGame.instance</code>, this is another good place to look.</p>
<p>Also in this class <code class="hljs">InGame.instance.bridge.Model</code> or (<code class="hljs">InGame.instance.GetGameModel()</code> with our extension method) is another <code class="hljs">GameModel</code> class. Read more to see why this is.</p>
<h2 id="cloned-gamemodels"><a class="next-link" aria-hidden="true" tabindex="-1" href="/BTD-Mod-Helper/wiki/BTD6-Internal-Structure#cloned-gamemodels"><span class="icon icon-link"></span></a>Cloned GameModels</h2>
<p>The <code class="hljs">GameModel</code> that can be found at <code class="hljs">Game.instance.model</code> is in a pure / default state, effectively. It has all the <code class="hljs">TowerModels</code> unmodified by Monkey Knowledge, all at their Medium difficulty price, etc.</p>
<p>When starting a new match of BTD6, the game makes a clone of this base <code class="hljs">GameModel</code>, and then applies all the necessary modifications to it (the things that are referred to as &quot;mods&quot; in the source code). This includes things like Monkey Knowledge, Difficulty based pricing, CHIMPS rules, and more.</p>
<p>Thus, when making a mod, you as a modder need to decide which <code class="hljs">GameModel</code> would be better to modify.</p>
<p>You can use the <code class="hljs">OnGameModelLoaded()</code> hook in your BloonsTD6Mod file to change the core <code class="hljs">GameModel</code> if you&#x27;re doing something very important. This is dangerous, however, because other mods could implicitly rely on certain default functionality of the core <code class="hljs">GameModel</code>.</p>
<p>The alternative is to use the <code class="hljs">OnNewGameModel()</code> hook to modify the newly cloned <code class="hljs">GameModel</code> whenever a match starts. This has the benefit of being safer with respect to other mods, as well as being able to interact with Monkey Knowledge and such. If you only sometimes want to make a change to the <code class="hljs">GameModel</code>, this is definitely the way to go. Additionally, if we as a modding community ever want to get to the point where we can load and unload mods without restarting the game, this is the way we have to change the <code class="hljs">GameModel</code>.</p></div></div></div><div class="main-panel btd6-panel blue my-lg-4 d-flex justify-content-between align-items-center container-lg"><button type="button" class="btd6-button blue long align-self-stretch p-3 btn btn-outline-light">Back to Top</button><div class="text-center d-none d-sm-block fs-larger">To learn how to download BTD Mod Helper and install mods,<!-- --> <a href="/BTD-Mod-Helper/wiki/Install-Guide#main-content">click here</a></div><div class="text-end dropup"><button type="button" id="react-aria-:R1sjm:" aria-expanded="false" class="btd6-panel blue-insert-round dropdown-toggle btn btn-outline-light">Background</button></div></div></div></div><div style="position:absolute;height:6px;transition:opacity 200ms;opacity:0;display:none;right:2px;bottom:2px;left:2px;border-radius:3px"><div style="position:relative;display:block;height:100%;cursor:pointer;border-radius:inherit;background-color:rgba(0,0,0,.2)"></div></div><div style="position:absolute;width:10px;transition:opacity 200ms;opacity:0;display:none;top:2px;bottom:2px;border-radius:3px;right:2px;background-color:rgba(255, 255, 255, 0.2)"><div style="position:relative;display:block;width:100%;border-radius:3px;background-color:rgba(255, 255, 255, 0.5)"></div></div></div></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{"data":{"contentHtml":"\u003cp\u003eSome useful information about the internal structure of BTD6 so that you don't have to find it out yourself.\u003c/p\u003e\n\u003ch2 id=\"gameinstance\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"\" href=\"#gameinstance\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eGame.instance\u003c/h2\u003e\n\u003cp\u003eFrom any of your .cs files, you can use \u003ccode class=\"hljs\"\u003eGame.instance\u003c/code\u003e to access the BloonTD6 \u003ccode class=\"hljs\"\u003eGame\u003c/code\u003e. This class contains many important references to the data structures that power the overall running of the game.\u003c/p\u003e\n\u003ch2 id=\"the-gamemodel\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"\" href=\"#the-gamemodel\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eThe GameModel\u003c/h2\u003e\n\u003cp\u003eArguably the most important thing you'll find in \u003ccode class=\"hljs\"\u003eGame.instance\u003c/code\u003e is \u003ccode class=\"hljs\"\u003eGame.instance.model\u003c/code\u003e which is the main instance of the BloonsTD6 \u003ccode class=\"hljs\"\u003eGameModel\u003c/code\u003e (but importantly not the only one). The \u003ccode class=\"hljs\"\u003eGameModel\u003c/code\u003e isn't a model like a 3D display model, but rather a blueprint / collection of blueprints for playing a match of BloonsTD6.\u003c/p\u003e\n\u003cp\u003eFor instance, for all the information about Towers, such as their behavior, cost, damage, etc are all held in \u003ccode class=\"hljs\"\u003eTowerModels\u003c/code\u003e that you can find in \u003ccode class=\"hljs\"\u003eGame.instance.model.towers\u003c/code\u003e. The \u003ccode class=\"hljs\"\u003eGameModel\u003c/code\u003e contains various methods for finding \u003ccode class=\"hljs\"\u003eTowerModels\u003c/code\u003e such as \u003ccode class=\"hljs\"\u003eGetTower()\u003c/code\u003e and \u003ccode class=\"hljs\"\u003eGetTowerFromId()\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eSimilarly all the information about upgrades are stored in the \u003ccode class=\"hljs\"\u003eUpgradeModel\u003c/code\u003es of \u003ccode class=\"hljs\"\u003eGame.instance.model.upgrades\u003c/code\u003e, all the Bloons in \u003ccode class=\"hljs\"\u003eBloonModel\u003c/code\u003es of \u003ccode class=\"hljs\"\u003eGame.instance.model.bloons\u003c/code\u003e and etc.\u003c/p\u003e\n\u003ch2 id=\"ingameinstance\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"\" href=\"#ingameinstance\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eInGame.instance\u003c/h2\u003e\n\u003cp\u003eSimilarly to \u003ccode class=\"hljs\"\u003eGame.instance\u003c/code\u003e, you can use \u003ccode class=\"hljs\"\u003eInGame.instance\u003c/code\u003e in any of your .cs files to access the \u003ccode class=\"hljs\"\u003eInGame\u003c/code\u003e class which has a lot of important information and functions relating to running the current match of BTD6.\u003c/p\u003e\n\u003ch2 id=\"unitytosimulation-aka-the-bridge\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"\" href=\"#unitytosimulation-aka-the-bridge\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eUnityToSimulation (aka the \"bridge\")\u003c/h2\u003e\n\u003cp\u003eThe \u003ccode class=\"hljs\"\u003eUnityToSimulation\u003c/code\u003e class found at \u003ccode class=\"hljs\"\u003eInGame.instance.bridge\u003c/code\u003e controls the interaction between the simulation (all of the information about the current state) and Unity (the engine powering the visualization of the game. This has more methods for handling / manipulating current match information, so if you didn't find what you were looking for in \u003ccode class=\"hljs\"\u003eInGame.instance\u003c/code\u003e, this is another good place to look.\u003c/p\u003e\n\u003cp\u003eAlso in this class \u003ccode class=\"hljs\"\u003eInGame.instance.bridge.Model\u003c/code\u003e or (\u003ccode class=\"hljs\"\u003eInGame.instance.GetGameModel()\u003c/code\u003e with our extension method) is another \u003ccode class=\"hljs\"\u003eGameModel\u003c/code\u003e class. Read more to see why this is.\u003c/p\u003e\n\u003ch2 id=\"cloned-gamemodels\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"\" href=\"#cloned-gamemodels\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eCloned GameModels\u003c/h2\u003e\n\u003cp\u003eThe \u003ccode class=\"hljs\"\u003eGameModel\u003c/code\u003e that can be found at \u003ccode class=\"hljs\"\u003eGame.instance.model\u003c/code\u003e is in a pure / default state, effectively. It has all the \u003ccode class=\"hljs\"\u003eTowerModels\u003c/code\u003e unmodified by Monkey Knowledge, all at their Medium difficulty price, etc.\u003c/p\u003e\n\u003cp\u003eWhen starting a new match of BTD6, the game makes a clone of this base \u003ccode class=\"hljs\"\u003eGameModel\u003c/code\u003e, and then applies all the necessary modifications to it (the things that are referred to as \"mods\" in the source code). This includes things like Monkey Knowledge, Difficulty based pricing, CHIMPS rules, and more.\u003c/p\u003e\n\u003cp\u003eThus, when making a mod, you as a modder need to decide which \u003ccode class=\"hljs\"\u003eGameModel\u003c/code\u003e would be better to modify.\u003c/p\u003e\n\u003cp\u003eYou can use the \u003ccode class=\"hljs\"\u003eOnGameModelLoaded()\u003c/code\u003e hook in your BloonsTD6Mod file to change the core \u003ccode class=\"hljs\"\u003eGameModel\u003c/code\u003e if you're doing something very important. This is dangerous, however, because other mods could implicitly rely on certain default functionality of the core \u003ccode class=\"hljs\"\u003eGameModel\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eThe alternative is to use the \u003ccode class=\"hljs\"\u003eOnNewGameModel()\u003c/code\u003e hook to modify the newly cloned \u003ccode class=\"hljs\"\u003eGameModel\u003c/code\u003e whenever a match starts. This has the benefit of being safer with respect to other mods, as well as being able to interact with Monkey Knowledge and such. If you only sometimes want to make a change to the \u003ccode class=\"hljs\"\u003eGameModel\u003c/code\u003e, this is definitely the way to go. Additionally, if we as a modding community ever want to get to the point where we can load and unload mods without restarting the game, this is the way we have to change the \u003ccode class=\"hljs\"\u003eGameModel\u003c/code\u003e.\u003c/p\u003e","tableOfContentsHtml":"\u003cnav class=\"toc\"\u003e\u003col class=\"toc-level toc-level-1\"\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#gameinstance\"\u003eGame.instance\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#the-gamemodel\"\u003eThe GameModel\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#ingameinstance\"\u003eInGame.instance\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#unitytosimulation-aka-the-bridge\"\u003eUnityToSimulation (aka the \"bridge\")\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#cloned-gamemodels\"\u003eCloned GameModels\u003c/a\u003e\u003c/li\u003e\u003c/ol\u003e\u003c/nav\u003e","title":"BTD6 Internal Structure"},"sidebar":{"contentHtml":"\u003ch5 id=\"home\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"\" href=\"#home\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003e\u003ca href=\"/wiki/Home\"\u003eHome\u003c/a\u003e\u003c/h5\u003e\n\u003ch5 id=\"install-guide\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"\" href=\"#install-guide\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003e\u003ca href=\"/wiki/Install-Guide\"\u003eInstall Guide\u003c/a\u003e\u003c/h5\u003e\n\u003ch6 id=\"starting-btd-modding\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"\" href=\"#starting-btd-modding\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eStarting BTD Modding\u003c/h6\u003e\n\u003cp\u003e\u003ca href=\"/wiki/Prerequisites\"\u003ePrerequisites\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"/wiki/Getting-Started\"\u003eGetting Started\u003c/a\u003e\u003c/p\u003e\n\u003ch6 id=\"mod-helper-features\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"\" href=\"#mod-helper-features\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eMod Helper Features\u003c/h6\u003e\n\u003cp\u003e\u003ca href=\"/wiki/Making-a-Custom-Tower\"\u003e\u003cstrong\u003eMaking a Custom Tower\u003c/strong\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"/wiki/Making-a-Custom-Paragon\"\u003e\u003cstrong\u003eMaking a Custom Paragon\u003c/strong\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"/wiki/Making-a-Custom-Hero\"\u003e\u003cstrong\u003eMaking a Custom Hero\u003c/strong\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"/wiki/Appearing-in-the-Mod-Browser\"\u003e\u003cstrong\u003eAppearing in the Mod Browser\u003c/strong\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"/wiki/Localization\"\u003eLocalization\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"/wiki/Making-a-Custom-Bloon\"\u003eMaking a Custom Bloon\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"/wiki/Making-a-Custom-Game-Mode\"\u003eMaking a Custom Game Mode\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"/wiki/Making-a-Custom-Round-Set\"\u003eMaking a Custom Round Set\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"/wiki/Custom-UI\"\u003eCustom UI (ModHelperComponents)\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"/wiki/Custom-Menu-Screens\"\u003eCustom Menu Screens\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"/wiki/Custom-Byte-Loaders\"\u003eCustom Byte Loaders\u003c/a\u003e\u003c/p\u003e\n\u003ch6 id=\"btd-modding-info\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"\" href=\"#btd-modding-info\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eBTD Modding Info\u003c/h6\u003e\n\u003cp\u003e\u003ca href=\"/wiki/BTD6-Internal-Structure\"\u003eBTD6 Internal Structure\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"/wiki/Looking-at-BTD6-Code-(Sorta)\"\u003eLooking at BTD6 Code (Sorta)\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"/wiki/IL2CPP-Is-Weird\"\u003eIL2CPP Is Weird\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"/wiki/Useful-Resources\"\u003eUseful Resources\u003c/a\u003e\u003c/p\u003e\n\u003ch6 id=\"mod-helper-utilities\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"\" href=\"#mod-helper-utilities\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eMod Helper Utilities\u003c/h6\u003e\n\u003cp\u003e\u003ca href=\"/wiki/Using-Mod-Helper-Hooks\"\u003eUsing Mod Helper Hooks\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"/wiki/ModContent\"\u003eModContent\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"/wiki/Custom-Textures-and-Displays\"\u003eCustom Textures and Displays\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"/wiki/Mod-Settings\"\u003eIn Game Mod Settings\u003c/a\u003e\u003c/p\u003e\n\u003ch6 id=\"extension-methods\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"\" href=\"#extension-methods\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eExtension Methods\u003c/h6\u003e\n\u003cp\u003e\u003ca href=\"/wiki/Common-Extension-Methods\"\u003eCommon Extension Methods\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"/wiki/Array-extension-methods\"\u003eArray Extension Methods\u003c/a\u003e\u003c/p\u003e","tableOfContentsHtml":"\u003cnav class=\"toc\"\u003e\u003col class=\"toc-level toc-level-1\"\u003e\u003cli class=\"toc-item toc-item-h5\"\u003e\u003ca class=\"toc-link toc-link-h5\" href=\"#home\"\u003eHome\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h5\"\u003e\u003ca class=\"toc-link toc-link-h5\" href=\"#install-guide\"\u003eInstall Guide\u003c/a\u003e\u003col class=\"toc-level toc-level-2\"\u003e\u003cli class=\"toc-item toc-item-h6\"\u003e\u003ca class=\"toc-link toc-link-h6\" href=\"#starting-btd-modding\"\u003eStarting BTD Modding\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h6\"\u003e\u003ca class=\"toc-link toc-link-h6\" href=\"#mod-helper-features\"\u003eMod Helper Features\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h6\"\u003e\u003ca class=\"toc-link toc-link-h6\" href=\"#btd-modding-info\"\u003eBTD Modding Info\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h6\"\u003e\u003ca class=\"toc-link toc-link-h6\" href=\"#mod-helper-utilities\"\u003eMod Helper Utilities\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h6\"\u003e\u003ca class=\"toc-link toc-link-h6\" href=\"#extension-methods\"\u003eExtension Methods\u003c/a\u003e\u003c/li\u003e\u003c/ol\u003e\u003c/li\u003e\u003c/ol\u003e\u003c/nav\u003e"}},"__N_SSG":true},"page":"/wiki/[...mdPath]","query":{"mdPath":["BTD6-Internal-Structure"]},"buildId":"ukqKSHooCdO3xcE7m-DiA","assetPrefix":"/BTD-Mod-Helper","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>