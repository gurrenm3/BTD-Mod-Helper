(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[257],{59360:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tools/translate",function(){return n(82283)}])},13379:function(e,t,n){"use strict";n.d(t,{VO:function(){return L},Lp:function(){return D},ZP:function(){return layout},wN:function(){return E}});var a=n(85893),l=n(67294),s=n(86658),r=n(66409),i=n(35005),o=n(10682),c=n(77642),d=n(89054),u=n(25001),h=n(41244),m=n(85792),g=n(41664),x=n.n(g),p=n(25675),b=n.n(p),f={src:"/BTD-Mod-Helper//_next/static/media/ModsBtn.b2997d2b.png",height:512,width:512,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAflBMVEVMaXG7hCHLhwmdpoK9p4TdthSngVbxmwXNcgqrl4LEmia8nmS3XVuRcjV/Qj9zVVXLnj7Usn/UlxKid05oqXijpUDWly/osACUdSzIjSfOplO4kV7/oQAvpKfGlky5rYeviR+TXxx7nWuGt2VaoXC0dRKPkjbKlyFXvpPQxxtqnmY1AAAAIHRSTlMA/v3+aHn9NU8skZGke6wh/Tzpcf74/Pv+/P53+/ryhJZ2BQQAAAAJcEhZcwAADsIAAA7CARUoSoAAAABHSURBVHicFctFFoAgAEDBLyrY3Qm297+gz9kPkK+OD+DY9pCF4C9a9J2MGC0pjGUSyru99HTGpMU7N8fmgVc/1R78Tbmugg+BywPMW/TImwAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},j=n(15747),v=n(11163),w=n(10191),N=n(16336),k=n(24486),A=n(29100),y=n(12158),Z=n(80516),C=n(4376),T=n(22133),M=n(93967),H=n.n(M),S=n(40784);let ModHelperNavItem=e=>{let{path:t,title:n,href:l,disabled:s,children:r,active:i,...o}=e;return(0,a.jsx)(h.Z,{"data-toggle":"tooltip",title:n,children:(0,a.jsx)(m.Z,{as:x(),href:l,disabled:s,active:!s&&("/"===l?l===t:t.startsWith(i||l)),className:"text-outline-black fs-3 py-0",...o,children:r})})},ModHelperNavBar=e=>{var t;let{className:n}=e,s=(0,v.useRouter)(),r=null!==(t=null==s?void 0:s.asPath)&&void 0!==t?t:"",{theme:i,refreshTheme:c}=(0,l.useContext)(S.ThemeContext);return(0,a.jsx)(o.Z,{fluid:E,className:H()("p-0","mb-2","my-".concat(E,"-4"),n),children:(0,a.jsxs)(d.Z,{variant:"dark",expand:"md",className:"luckiest-guy d-flex main-panel btd6-panel blue header",children:[(0,a.jsx)(u.Z,{href:"/BTD-Mod-Helper/",className:"py-0",children:(0,a.jsx)(b(),{src:f,alt:"Mod Helper logo",width:50,height:50,loading:"eager",priority:!0})}),(0,a.jsx)(u.Z,{href:"/BTD-Mod-Helper/",className:"text-outline-black text-white fs-3 py-0 me-auto",children:"BTD Mod Helper"}),(0,a.jsx)("div",{className:"ms-auto me-4",children:(0,a.jsx)(N.p,{className:"dark-mode-switch",checked:"dark"===i,sunColor:"rgba(255,255,255,.75)",moonColor:"rgba(255,255,255,.75)",onChange:()=>{let e="dark"===i?"light":"dark";localStorage.setItem("theme",e),document.documentElement.setAttribute("data-theme",e),c()},size:"2rem",style:{userSelect:"none"}})}),(0,a.jsx)(w.Z,{label:"toggle",className:"btd6-button blue p-2",children:(0,a.jsx)(T.Z,{size:"2rem",className:"text-white"})}),(0,a.jsx)(j.Z,{className:"flex-grow-0",children:(0,a.jsxs)("div",{className:"navbar-nav ms-auto text-center",children:[(0,a.jsx)(ModHelperNavItem,{path:r,href:"/",children:"Home"}),(0,a.jsx)(ModHelperNavItem,{path:r,href:"/wiki/Home",active:"/wiki",children:"Wiki"}),(0,a.jsx)(ModHelperNavItem,{path:r,href:"/docs/README",active:"/docs",children:"Docs"}),(0,a.jsx)(ModHelperNavItem,{path:r,href:"/mod-browser",children:"Mod Browser"})]})})]})})},ModHelperFooter=e=>{let{buttonName:t,buttonOnClick:n,className:s,body:r}=e;(0,l.useContext)(D);let[d,u]=(0,l.useContext)(C.Nq);return(0,a.jsxs)(o.Z,{fluid:E,className:H()("main-panel btd6-panel blue mt-2 footer","my-".concat(E,"-4"),"d-flex justify-content-between align-items-center",s),children:[(0,a.jsx)(i.Z,{variant:"outline-light",onClick:()=>{n?n():window.scrollTo({top:0,behavior:"smooth"})},className:"btd6-button blue long  p-3 text-white",children:t||"Back to Top"}),(0,a.jsx)("div",{className:"text-center d-none d-sm-block fs-larger",children:r||(0,a.jsxs)(a.Fragment,{children:["To learn how to download BTD Mod Helper and install mods,"," ",(0,a.jsx)(x(),{href:"/wiki/Install-Guide#main-content",children:"click here"})]})}),(0,a.jsxs)(c.Z,{drop:"up",align:"end",className:"text-end",children:[(0,a.jsx)(k.Z,{className:"btd6-panel blue-insert-round",variant:"outline-light",children:"Background"}),(0,a.jsx)(A.Z,{className:"non-main-panel bg-black btd6-panel blue-insert pe-0",children:(0,a.jsx)(L,{children:Object.keys(y).map(e=>(0,a.jsx)(Z.Z,{active:e===d,className:"p-0 me-3 w-auto text-white",onClick:()=>u(e),children:y[e]},e))})})]})]})};var B=n(37);let E="lg",D=(0,l.createContext)(null),L=(0,l.forwardRef)((e,t)=>{let{children:n,...l}=e;return(0,a.jsx)(s.$B,{ref:t,universal:!0,autoHeight:!0,autoHide:!0,hideTracksWhenNotNeeded:!0,autoHideTimeout:1e3,autoHideDuration:200,renderTrackVertical:e=>{let{style:t,...n}=e;return(0,a.jsx)("div",{...n,style:{...t,width:10,top:2,bottom:2,borderRadius:3,right:2,backgroundColor:"rgba(255, 255, 255, 0.2)"}})},renderThumbVertical:e=>{let{style:t,...n}=e;return(0,a.jsx)("div",{...n,style:{...t,borderRadius:3,backgroundColor:"rgba(255, 255, 255, 0.5)"}})},...l,children:n})});var layout=e=>{var t;let{children:n,className:l,style:s,bottomLeftButton:i,bottomLeftOnClick:o,headerClassName:c,footerClassName:d,fitHeight:u,footerBody:h,...m}=e,g=null!==(t=(0,r.g)())&&void 0!==t?t:1e3;return(0,a.jsxs)("div",{className:H()("d-flex","flex-column",l),style:{minHeight:g,...s},...m,children:[(0,a.jsx)(B.Z,{}),(0,a.jsx)(ModHelperNavBar,{className:c}),n,(0,a.jsx)(ModHelperFooter,{buttonName:i,buttonOnClick:o,className:d,body:h})]})}},37:function(e,t,n){"use strict";n.d(t,{w:function(){return MainContentMarker}});var a=n(85893),l=n(41664),s=n.n(l);n(67294),t.Z=()=>(0,a.jsx)(s(),{href:"#main-content",className:"position-absolute visually-hidden-focusable",onClick:()=>{var e;return null===(e=document.getElementById("main-content"))||void 0===e?void 0:e.focus()},children:"Skip to Main Content"});let MainContentMarker=()=>(0,a.jsx)("a",{id:"main-content",tabIndex:-1})},82283:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return translate}});var a,l,s=n(85893),r=n(66409),i=n(13379),o=n(67294),c=n(81333),d=n(35005),u=n(31555),h=n(10682),m=n(77642),g=n(34051),x=n(35386),p=n(24486),b=n(29100),f=n(80516);(a=l||(l={})).Arabic="ar",a.Danish="da",a.Dutch="nl",a.English="en",a.Finnish="fi",a.French="fr",a.German="de",a.Italian="it",a.Japanese="ja",a.Korean="ko",a.Norwegian="no",a.Polish="pl",a.Portuguese_Brazil="pt-BR",a.Russian="ru",a.SimplifiedChinese="zh-CN",a.Spanish_LATAM="es-419",a.Spanish_Spain="es",a.Swedish="sv",a.Thai="th",a.TraditionalChinese="zh-TW",a.Turkish="tr";var j=n(28325),v=n(40460),w=n.n(v);n(74277),n(21819);let saveFile=(e,t)=>{let n=window.URL.createObjectURL(t),a=document.createElement("a");a.href=n,a.download=e,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(n)};var N=n(31252);let k=new N.GoogleTranslator,translateLocalization=async(e,t,n)=>{let a=Object.entries(e).filter(e=>{let[t,n]=e;return"string"==typeof n}),l=await k.translateBatch(a.map(e=>{let[t,n]=e;return n}),t,n),s=Object.fromEntries(a.map((e,t)=>{let[n,a]=e;return[n,l[t]]}));return JSON.stringify(s,null,2)},translateAll=async(e,t)=>Object.fromEntries(await Promise.all(Object.entries(l).filter(e=>{let[n,a]=e;return a!==t}).map(n=>{let[a,l]=n;return translateLocalization(e,t,l).then(async e=>[a,e]).catch(e=>(console.error("Failed to translate localization",a),console.error(e),[a,{}]))})));var A=n(55733),y=n.n(A);let LanguageDropdown=e=>{let{language:t,setLanguage:n}=e;return(0,s.jsxs)(m.Z,{children:[(0,s.jsx)(p.Z,{className:"btd6-panel blue-insert-round",variant:"outline-light",children:t}),(0,s.jsx)(b.Z,{className:"non-main-panel bg-black btd6-panel blue-insert pe-0",children:(0,s.jsx)(i.VO,{children:Object.keys(l).map(e=>(0,s.jsx)(f.Z,{active:t==e,className:"p-0 me-3 w-auto text-white",onClick:()=>n(e),children:e},e))})})]})};var translate=()=>{var e;let t=null!==(e=(0,r.g)())&&void 0!==e?e:1e3,[n,a]=(0,o.useState)("{}"),[m,p]=(0,o.useState)({}),[b,f]=(0,o.useState)(""),[v,N]=(0,o.useState)("English"),[k,A]=(0,o.useState)("English");(0,x.Z)(()=>{try{p(JSON.parse(n||"{}"))}catch(e){}},1e3,[n,v,k]),(0,o.useEffect)(()=>{if(0==Object.keys(m).length||v===k){f(JSON.stringify(m,null,4));return}translateLocalization(m,l[v],l[k]).then(e=>f(e)).catch(e=>{alert("Translation Failed: ".concat(e))})},[m,v]);let Z=(0,o.useRef)(null);return(0,o.useEffect)(()=>{let handleSave=e=>{if((e.ctrlKey||e.metaKey)&&"s"===e.key){var t;e.preventDefault(),null===(t=Z.current)||void 0===t||t.click()}};return window.addEventListener("keydown",handleSave),()=>window.removeEventListener("keydown",handleSave)},[k,b]),(0,s.jsxs)(i.ZP,{style:{height:t},footerClassName:"d-none",children:[(0,s.jsx)(c.Z,{title:"Translate Tool",description:"Auto translate localization files for BloonsTD6 Mods"}),(0,s.jsxs)(h.Z,{fluid:i.wN,className:"d-flex flex-column main-panel btd6-panel blue flex-1 gap-2",children:[(0,s.jsxs)(g.Z,{className:"h-10",children:[(0,s.jsxs)(u.Z,{xs:12,lg:6,className:"d-flex flex-column",children:[(0,s.jsx)(g.Z,{className:"g-2 mb-2",children:(0,s.jsx)(u.Z,{xs:"auto",children:(0,s.jsx)(LanguageDropdown,{language:v,setLanguage:N})})}),(0,s.jsx)(w(),{className:"btd6-panel white-insert",value:n,onValueChange:e=>a(e),highlight:e=>(0,j.highlight)(e,j.languages.json),padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,minHeight:400,outline:"none !important",color:"black"}})]}),(0,s.jsxs)(u.Z,{xs:12,lg:6,className:"d-flex flex-column",children:[(0,s.jsxs)(g.Z,{className:"g-2 mb-2",children:[(0,s.jsx)(u.Z,{xs:"auto",children:(0,s.jsx)(LanguageDropdown,{language:k,setLanguage:A})}),(0,s.jsx)(u.Z,{xs:"auto",children:(0,s.jsx)(d.Z,{className:"btd6-button long blue h-100 luckiest-guy px-5 mx-1",onClick:()=>window.navigator.clipboard.writeText(b),children:"Copy"})}),(0,s.jsx)(u.Z,{xs:"auto",children:(0,s.jsx)(d.Z,{className:"btd6-button long blue h-100 luckiest-guy px-5 mx-1",ref:Z,onClick:()=>saveFile(k+".json",new Blob([b],{type:"text/plain"})),children:"Save"})}),(0,s.jsx)(u.Z,{xs:"auto",className:"ms-auto",children:(0,s.jsx)(d.Z,{className:"btd6-button long blue h-100 luckiest-guy px-2 mx-1",onClick:async()=>{let e=await translateAll(m,l[v]),t=new(y());for(let[n,a]of Object.entries(e))t.file(n+".json",a+"\n");await t.generateAsync({type:"blob"}).then(e=>{saveFile("Localization.zip",e)})},children:"Translate All"})})]}),(0,s.jsx)(w(),{className:"btd6-panel white-insert",value:b,onValueChange:()=>{},highlight:e=>(0,j.highlight)(e,j.languages.json),padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,minHeight:400},readOnly:!0})]})]}),(0,s.jsx)("p",{children:"Paste in BTD6 Localization .json content into the left side to translate to different languages. These .json files can be generated with the small button at the top right of the Mod Helper mods menu."})]})]})}}},function(e){e.O(0,[234,662,79,636,285,774,888,179],function(){return e(e.s=59360)}),_N_E=e.O()}]);