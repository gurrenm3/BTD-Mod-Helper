(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[257],{59360:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tools/translate",function(){return t(82283)}])},82283:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return translate}});var a,l,s=t(85893),i=t(66409),o=t(66760),r=t(67294),c=t(81333),u=t(35005),d=t(31555),h=t(10682),g=t(77642),m=t(34051),f=t(35386),p=t(24486),x=t(29100),b=t(80516);(a=l||(l={})).Arabic="ar",a.Danish="da",a.Dutch="nl",a.English="en",a.Finnish="fi",a.French="fr",a.German="de",a.Italian="it",a.Japanese="ja",a.Korean="ko",a.Norwegian="no",a.Polish="pl",a.Portuguese_Brazil="pt-BR",a.Russian="ru",a.SimplifiedChinese="zh-CN",a.Spanish_LATAM="es-419",a.Spanish_Spain="es",a.Swedish="sv",a.Thai="th",a.TraditionalChinese="zh-TW",a.Turkish="tr";var j=t(28325),w=t(40460),y=t.n(w);t(74277),t(21819);let saveFile=(e,n)=>{let t=window.URL.createObjectURL(n),a=document.createElement("a");a.href=t,a.download=e,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(t)};var v=t(31252);let N=new v.GoogleTranslator,translateLocalization=async(e,n,t)=>{let a=Object.entries(e).filter(e=>{let[n,t]=e;return"string"==typeof t}),l=await N.translateBatch(a.map(e=>{let[n,t]=e;return t}),n,t),s=Object.fromEntries(a.map((e,n)=>{let[t,a]=e;return[t,l[n]]}));return JSON.stringify(s,null,2)},translateAll=async(e,n)=>Object.fromEntries(await Promise.all(Object.entries(l).filter(e=>{let[t,a]=e;return a!==n}).map(t=>{let[a,l]=t;return translateLocalization(e,n,l).then(async e=>[a,e]).catch(e=>(console.error("Failed to translate localization",a),console.error(e),[a,{}]))})));var k=t(55733),Z=t.n(k);let LanguageDropdown=e=>{let{language:n,setLanguage:t}=e;return(0,s.jsxs)(g.Z,{children:[(0,s.jsx)(p.Z,{className:"btd6-panel blue-insert-round",variant:"outline-light",children:n}),(0,s.jsx)(x.Z,{className:"non-main-panel bg-black btd6-panel blue-insert pe-0",children:(0,s.jsx)(o.VO,{children:Object.keys(l).map(e=>(0,s.jsx)(b.Z,{active:n==e,className:"p-0 me-3 w-auto text-white",onClick:()=>t(e),children:e},e))})})]})};var translate=()=>{var e;let n=null!==(e=(0,i.g)())&&void 0!==e?e:1e3,[t,a]=(0,r.useState)("{}"),[g,p]=(0,r.useState)({}),[x,b]=(0,r.useState)(""),[w,v]=(0,r.useState)("English"),[N,k]=(0,r.useState)("English");(0,f.Z)(()=>{try{p(JSON.parse(t||"{}"))}catch(e){}},1e3,[t,w,N]),(0,r.useEffect)(()=>{if(0==Object.keys(g).length||w===N){b(JSON.stringify(g,null,4));return}translateLocalization(g,l[w],l[N]).then(e=>b(e)).catch(e=>{alert("Translation Failed: ".concat(e))})},[g,w]);let S=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let handleSave=e=>{if((e.ctrlKey||e.metaKey)&&"s"===e.key){var n;e.preventDefault(),null===(n=S.current)||void 0===n||n.click()}};return window.addEventListener("keydown",handleSave),()=>window.removeEventListener("keydown",handleSave)},[N,x]),(0,s.jsxs)(o.ZP,{style:{height:n},footerClassName:"d-none",children:[(0,s.jsx)(c.Z,{title:"Translate Tool",description:"Auto translate localization files for BloonsTD6 Mods"}),(0,s.jsxs)(h.Z,{fluid:o.wN,className:"d-flex flex-column main-panel btd6-panel blue flex-1 gap-2",children:[(0,s.jsxs)(m.Z,{className:"h-10",children:[(0,s.jsxs)(d.Z,{xs:12,lg:6,className:"d-flex flex-column",children:[(0,s.jsx)(m.Z,{className:"g-2 mb-2",children:(0,s.jsx)(d.Z,{xs:"auto",children:(0,s.jsx)(LanguageDropdown,{language:w,setLanguage:v})})}),(0,s.jsx)(y(),{className:"btd6-panel white-insert",value:t,onValueChange:e=>a(e),highlight:e=>(0,j.highlight)(e,j.languages.json),padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,minHeight:400,outline:"none !important",color:"black"}})]}),(0,s.jsxs)(d.Z,{xs:12,lg:6,className:"d-flex flex-column",children:[(0,s.jsxs)(m.Z,{className:"g-2 mb-2",children:[(0,s.jsx)(d.Z,{xs:"auto",children:(0,s.jsx)(LanguageDropdown,{language:N,setLanguage:k})}),(0,s.jsx)(d.Z,{xs:"auto",children:(0,s.jsx)(u.Z,{className:"btd6-button long blue h-100 luckiest-guy px-5 mx-1",onClick:()=>window.navigator.clipboard.writeText(x),children:"Copy"})}),(0,s.jsx)(d.Z,{xs:"auto",children:(0,s.jsx)(u.Z,{className:"btd6-button long blue h-100 luckiest-guy px-5 mx-1",ref:S,onClick:()=>saveFile(N+".json",new Blob([x],{type:"text/plain"})),children:"Save"})}),(0,s.jsx)(d.Z,{xs:"auto",className:"ms-auto",children:(0,s.jsx)(u.Z,{className:"btd6-button long blue h-100 luckiest-guy px-2 mx-1",onClick:async()=>{let e=await translateAll(g,l[w]),n=new(Z());for(let[t,a]of Object.entries(e))n.file(t+".json",a+"\n");await n.generateAsync({type:"blob"}).then(e=>{saveFile("Localization.zip",e)})},children:"Translate All"})})]}),(0,s.jsx)(y(),{className:"btd6-panel white-insert",value:x,onValueChange:()=>{},highlight:e=>(0,j.highlight)(e,j.languages.json),padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,minHeight:400},readOnly:!0})]})]}),(0,s.jsx)("p",{children:"Paste in BTD6 Localization .json content into the left side to translate to different languages. These .json files can be generated with the small button at the top right of the Mod Helper mods menu."})]})]})}}},function(e){e.O(0,[234,662,636,285,774,888,179],function(){return e(e.s=59360)}),_N_E=e.O()}]);